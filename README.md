# Text classification with CNN and Word2vec

### 3.0训练记录：
#### 第1次训练:
```
经过word2vec加权的，3.0一万条数据，epoch=10，训练结果如下：
step: 1600,train loss: 1.232, train accuracy: 0.703, val loss: 2.011, val accuracy: 0.465
Test Loss:    2.1, Test Acc:  45.59%
```
```
  precision    recall  f1-score   support

          儿科       0.52      0.81      0.64       198
       耳鼻咽喉科       0.27      0.42      0.33        84
       风湿免疫科       0.53      0.51      0.52        72
         妇产科       0.47      0.41      0.44       145
        肝胆外科       0.31      0.41      0.35        64
     感染科 传染科       0.22      0.18      0.20        55   *
        肛肠外科       0.63      0.41      0.50        63
          骨科       0.38      0.61      0.47       102
        呼吸内科       0.50      0.44      0.47        90
         急诊科       0.33      0.04      0.07        55
       精神心理科       0.61      0.33      0.43        58
         口腔科       0.72      0.78      0.75       100
        泌尿外科       0.25      0.27      0.26        63
        内分泌科       0.64      0.51      0.57        86
         皮肤科       0.44      0.58      0.50       118
        普通内科       0.16      0.16      0.16        55
         普外科       0.39      0.23      0.29        47
        乳腺外科       0.67      0.65      0.66       105
         烧伤科       0.50      0.05      0.10        19
        神经内科       0.47      0.49      0.48       129
        神经外科       0.40      0.10      0.16        61
     疼痛科 麻醉科       0.47      0.25      0.33        60
        头颈外科       0.50      0.53      0.51        59
        消化内科       0.48      0.59      0.53       135
       心血管内科       0.49      0.45      0.47       106
         性病科       0.35      0.52      0.42        60
         胸外科       0.30      0.15      0.20        60
         血液科       0.40      0.37      0.38        71
          眼科       0.80      0.74      0.77        89-----------已整理v4.0 105
         疫苗科       0.00      0.00      0.00         9  *
       影像检验科       0.33      0.17      0.22        53
         整形科       0.38      0.48      0.42        63
         中医科       0.12      0.07      0.09        54 -----------已整理v4.0 109
         肿瘤科       0.26      0.31      0.28        64

    accuracy                           0.46      2652
   macro avg       0.42      0.38      0.38      2652
weighted avg       0.46      0.46      0.44      2652
```

### 2.0训练记录
#### 第1次训练:
```
train acc 0.48；val acc 0.37；test acc 0.35
数据欠拟合
```
#### 第2次训练:
```
train acc 0.45；val acc 0.27；test acc 0.25
更改条件：1.加入单个文字；2.加入标点符号和数字；3.x_text维度降为300；4. 词典大小总词汇改为25000
```
#### 第3次训练:
```
train acc 0.89；val acc 0.35；test acc 0.36
更改条件：1.Epoch更改为15轮；2.去掉了标点符号；
```
#### 第4次训练:
```
train acc 0.96；val acc 0.43；test acc 0.43
更改条件：1.Epoch更改为30轮；2.x_text维度降为300降为256 3.predict时把vocab_size改成词典大小23051；
实验效果：20轮训练以后 val acc 逐渐趋紧0.44-0.46左右；val acc上升速度很慢；随机抽取十个数据并不能达到40%的准确度
```
#### 第5次训练:
```
数据量拓展一倍以后的训练
step: 1600,train loss: 1.245, train accuracy: 0.625, val loss: 1.982, val accuracy: 0.474*
```

# 原始模型训练记录（字符集文本表示+textcnn+textrnn）
```
cnn: train acc 0.64；val acc 0.57；test acc 0.56
rnn: train acc 0.47；val acc 0.37；test acc 0.37 （epoch:10 实际5）
rnn: train acc 0.79；val acc 0.40；test acc 0.40 （epoch:20 实际10）
rnn比CNN模型要慢几倍到十几倍。因为，后一个时间步的输出依赖于前一个时间步的输出，无法进行并行处理，导致模型训练的速度慢，且准确度较低，所以实验舍弃使用rnn模型。
```

#### 第2次训练:
```
cnn 词汇表以词力度划分，导致模型过拟合
Iter:    900, Train Loss:   0.67, Train Acc:  79.69%, Val Loss:    1.9, Val Acc:  53.96%, Time: 0:03:09 *
```